export FPATH="$HOME/tools/eza/completions/zsh:$FPATH"
export GPG_TTY=$(tty)
export PATH="$HOME/bin:/usr/local/bin:$PATH"
export MANPATH="/usr/local/man:$MANPATH"
export ZSH="$HOME/.oh-my-zsh"
export ARCHFLAGS="-arch x86_64"
export LANG=en_US.UTF-8

CASE_SENSITIVE="false"
COMPLETIONS="$DOTFILES/zsh/completions"
DISABLE_UNTRACKED_FILES_DIRTY="true"
DOTFILES="$HOME/dotfiles"
ENABLE_CORRECTION="true"
HIST_STAMPS="yyyy-mm-dd"
HYPHEN_INSENSITIVE="true"
ZELLIJ_AUTO_EXIT=false
ZELLIJ_AUTO_ATTACH=true
ZELLIJ_DEFAULT_SESSION="localhost"

zstyle ':omz:update' mode auto      # update automatically without asking
zstyle ':omz:update' frequency 1

local -a PLUGINS=(
    zsh-users/zsh-completions
    MichaelAquilina/zsh-you-should-use
    marlonrichert/zcolors
    wfxr/forgit
    hlissner/zsh-autopair
    zsh-users/zsh-syntax-highlighting
    zsh-users/zsh-autosuggestions
)

plugins=(git docker npm yarn notify fzf)

for plugin in $PLUGINS; do
  ALIAS_PLUGIN="$(echo -n $plugin | cut -d '/' -f2)"
  plugins+=("$ALIAS_PLUGIN")
  if [[ -f "$HOME/.oh-my-zsh/custom/plugins/$ALIAS_PLUGIN" ]]; then
    git clone https://github.com/$plugin $HOME/.oh-my-zsh/custom/plugins/$ALIAS_PLUGIN;
  fi
done

local -a SOURCE=(
  "$ZSH/oh-my-zsh.sh"
  "$DOTFILES/bin/fzf-git"
  "$HOME/.ghcup/env"
  "$HOME/tools/google-cloud-sdk/path.zsh.inc"
  "$HOME/tools/google-cloud-sdk/completion.zsh.inc"
  "$HOME/.fzf.zsh"
  "$HOME/.fzf/shell/key-bindings.zsh"
  "$SDKMAN_DIR/bin/sdkman-init.sh"
  "$HOME/fzf.zsh"
  "$COMPLETIONS/yarn"
  "$COMPLETIONS/zellij"
  "$COMPLETIONS/docker"
  "$DOTFILES/zsh/export.sh"
  "$DOTFILES/zsh/git.sh"
  "$DOTFILES/zsh/fzf.sh"
  "$DOTFILES/zsh/alias.sh"
  "$DOTFILES/zsh/zstyle.sh"
)

for config in $SOURCE; do
    if [[ -f "$config" ]]; then
        source "$config";
    fi
done

eval "$(zoxide init zsh)"
eval "$(starship init zsh)"
if [[ -z "$ZELLIJ" ]]; then
    if [[ "$ZELLIJ_AUTO_ATTACH" == "true" ]]; then
        zinit localhost
    else
        echo;
    fi
fi
