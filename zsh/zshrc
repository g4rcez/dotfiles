export ZSH="$HOME/.oh-my-zsh"
ZSH_THEME="vandalvnl"
ENABLE_CORRECTION="true"
HIST_STAMPS="yyyy-mm-dd"

plugins=(
  dirhistory
  fast-syntax-highlighting
  fzf
  git
  httpie
  lpass
  nvm
  z
  zsh-autosuggestions
  zsh-interactive-cd
)

source $ZSH/oh-my-zsh.sh

# User configuration
export MANPATH="/usr/local/man:$MANPATH"
export ARCHFLAGS="-arch x86_64"
export SDKMAN_DIR="$HOME/.sdkman"
export PATH="$PATH:$HOME/.dotnet/tools"
export PATH="$HOME/tools/nvim-linux64/bin:$PATH"
export PATH="$PATH:$HOME/go/bin"
export PATH="$HOME/.yarn/bin:$HOME/.config/yarn/global/node_modules/.bin:$PATH"
export PATH="$PATH:$HOME/.local/bin"
export PATH="$PATH:$HOME/dotfiles/bin"
export PATH="$PATH:/snap/bin"

[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh

[[ -s "$HOME/.sdkman/bin/sdkman-init.sh" ]] && source "$HOME/.sdkman/bin/sdkman-init.sh"

if [ -d "$HOME/.bin/adb-fastboot/platform-tools" ]; then
  export PATH="$HOME/.bin/adb-fastboot/platform-tools:$PATH"
fi

# Unix utils
alias lz='ls -lSr'
alias wtf='pwd'
alias cp='cp -v'
alias rm='rm -v'
alias mv='mv -v'
alias more='less'
alias df='df -h'
alias egrep='egrep --color=auto'
alias fgrep='fgrep --color=auto'
alias grep='grep --color=auto'
alias downloads="cd $HOME/Downloads"
alias Downloads="cd $HOME/Downloads"
alias Documents="cd $HOME/Documents"
alias documents="cd $HOME/Documents"
alias work="cd $HOME/Workspace"
alias Work="cd $HOME/Workspace"
alias dotfiles="cd $HOME/dotfiles"

# For MacOS fanboys
alias pbcopy='xclip -sel clip'
alias pbpaste='xclip -selection clipboard -o'

# Git utils
alias add='git add'
alias commit='git commit -m'
alias push='git push -u'
alias pull='git pull'
alias tags='git tag | sort -V'
alias tag='git tag'
alias checkout='git checkout'
alias ghc="gh pr checkout"

# pnpm
alias n="pnpm"

# general stuff
alias lastpass="lpass"

function memory() {
  ps -eo size,pid,user,command --sort -size | awk '{ hr=$1/1024 ; printf("%13.2f MB ",hr) } { for ( x=4 ; x<=NF ; x++ ) { printf("%s ",$x) } print "" }'
}

function clone() {
  git clone git@github.com:$1
}

function cdm() {
  mkdir -p $1 && cd $1
}

function clonecd() {
  git clone git@github.com:$1
  cd $(echo $1 | cut -d '/' -f2-)
}

function sysinfo() {
  ps -A --sort -rsz -o pid,comm,pmem,pcpu | awk "NR<=15"
}

autoload -Uz compinit
compinit
zstyle ':completion::complete:*' gain-privileges 1

export NVM_DIR="$([ -z "${XDG_CONFIG_HOME-}" ] && printf %s "${HOME}/.nvm" || printf %s "${XDG_CONFIG_HOME}/nvm")"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh" # This loads nvm

autoload -U +X bashcompinit && bashcompinit
complete -o nospace -C "$HOME/.local/bin/terraform" terraform

if [ -x "$(command -v kitty)" ]; then
  alias icat="kitty +kitten icat"
  autoload -Uz compinit
  compinit
  kitty + complete setup zsh | source /dev/stdin
fi
export PATH="$HOME/tools:$PATH"
export PATH="$HOME/tools/google-cloud-sdk/bin:$PATH"

# pnpm
export PNPM_HOME="$HOME/.local/share/pnpm"
export PATH="$PNPM_HOME:$PATH"
# pnpm end

# The next line updates PATH for the Google Cloud SDK.
if [ -f '$HOME/tools/google-cloud-sdk/path.zsh.inc' ]; then . '$HOME/tools/google-cloud-sdk/path.zsh.inc'; fi

# The next line enables shell command completion for gcloud.
if [ -f '$HOME/tools/google-cloud-sdk/completion.zsh.inc' ]; then . '$HOME/tools/google-cloud-sdk/completion.zsh.inc'; fi
export VOLTA_HOME="$HOME/.volta"
export PATH="$VOLTA_HOME/bin:$PATH"
